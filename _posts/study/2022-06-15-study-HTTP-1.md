---
layout: post
title: 인터넷 네트워크
tags: Internet network IP TCP UDP 3wayhandshake DNS Port
description: >
    인프런 - 모든 개발자를 위한 HTTP 웹 기본 지식 강의 중 섹션 1을 듣고 정리하였습니다.
accent_image:
    background: url('/assets/img/blog/javascript_bg.jpg') center/cover
    overlay: false
sitemap: false
published: true
# invert_sidebar: true
categories:
    - study
---

---

### 인터넷 통신

클라이언트 컴퓨터와 서버 컴퓨터가 통신을 하기 위해서는 인터넷이 필요합니다.
'Hello World!' 메시지를 인터넷 망을 통해 보냈을 때 수많은 중간 노드라 불리는 서버들를 거쳐
안전하게 도착해야합니다.
우리는 이 메세지가 어떤 규칙을 통해 어떻게 넘어가게 되는지 공부하게 될 것입니다.
이것을 이해하기 위해 우리는 IP에 대한 지식이 필요합니다.

### IP(Internet Protocol)

예를들어 친구와 메시지를 주고 받을 때 안전한 데이터 통신을 위한 최소한의 규칙이 있어야 합니다.
그러기 위해서는 IP 주소가 필요합니다.
IP(인터넷 프로토콜)의 역할은 지정한 IP 주소(IP Address)에 패킷(Packet)이라는 통신 단위로 데이터를 전달하는 것입니다.

이때 메시지를 그냥 보내는 것이 아니라 IP 패킷애 정보를 담아서 보냅니다.
IP 패킷에는 내가 전송할 메시지와 출발지 IP, 도착지 IP, 기타 정보가 담깁니다.

하지만 IP 프로토콜에는 한계가 있습니다.

첫 번째로 비연결성, 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷을 전송합니다.(대상 서버가 패킷을 받을 수 있는 상태인지 모릅니다.)<br>
두 번째로 비신뢰성, 중간에 패킷이 사라지거나 패킷이 순서대로 오지 않을 수 있습니다.(패킷 용량이 클 경우 끊어서 보내는 경우가 있는데 이때 순서대로 도착하지 않을 수 있습니다.패킷들이 서로 다른 노드를 탈 수 있기 떄문입니다.)<br>
세 번째로 프로그램 구분, 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상일 경우 문제가 발생할 수 있습니다.<br>

IP 프로토콜만으로는 위의 문제들을 해결할 수 없으며 이 문제들을 해결해주는 것이 바로 TCP입니다.

### TCP, UDP

인터넷 프로토콜 스택의 4계층

-   애플리케이션 계층 - HTTP, FTP (예: 채팅 프로그램이 Hello World! 메시지 생성하고 SOCKET 라이브러리를 통해 전달)
-   전송 계층 - TCP, UDP (예: TCP 정보 생성, 메시지 데이터 포함)
-   인터넷 계층 - IP (예: IP 패킷 생성, TCP 데이터 포함)
-   네트워크 인터페이스 계층 (예: LAN 카드를 통해 인터넷 서버로 전송)

TCP 세그먼트에는 출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증 정보가 포함됩니다.
TCP는 전송 제어 프로토콜(Transmission Control Protocol)이며, 특징은 아래와 같습니다.

-   연결 지향 - TCP 3 way handsheke(가상 연결)

    TCP 3 way handshake는 클라이언트에서 먼저 SYN(접속 요청)을 서버에게 보내면 서버는 다시 클라이언트에게 SYN과 ACK(요청 수락)을 보냅니다.
    그걸 받은 클라이언트는 다시 서버에게 ACK을 보내고 그 이후 데이터 전송이 이루어 집니다.
    최근에는 최적화가 되어서 마지막 ACK을 보낼 때 데이터를 함께 전송하는 것도 가능합니다.
    3 way handshake는 정말로 연결이 된 것이 아니라 개념적(논리적)으로 연결된 것이므로 가상 연결이라 할 수 있습니다.(물리적 연결이 아닙니다.)

-   데이터 전달 보증(패킷이 누락되면 알 수 있습니다.)

    TCP에서는 클라이언트가 데이터를 전송하면 서버에서 데이터를 잘 받았다고 응답해줍니다.

-   순서 보장

    예를들어 패킷1, 패킷2, 패킷3 순서로 전송했을 때 서버에서 패킷1, 패킷3, 패킷2 순서로 도착하면 서버에서 클라이언트에게 패킷2부터 다시 보내달라고 요청합니다.

-   신뢰할 수 있는 프로토콜
-   현재는 대부분 TCP 사용

---

UDP(User Datagram Protocol - 사용자 데이터그램 프로토콜)는 기능이 없습니다.
기능이 거의 없기 때문에 하얀 도화지에 비유하며 TCP 3 way handshake도 하지 않습니다.
데이터 전달 보증, 순서 보장도 하지 않습니다.
데이터 전달 및 순서가 보장되진 않지만 단순하고 빠릅니다.
IP와 거의 같은데 PORT와 체크섬 정도만 추가하며 애플리케이션에서 추가 작업이 필요합니다.
HTTP/3에서 UDP를 사용하게 되며 최근 각광받고 있습니다.

### PORT

클라이언트가 한번에 여러 개의 서버와 통신해야 할 때 IP만으로는 어떤 애플리케이션에 대한 패킷인지 알 수 없기 때문에 사용합니다.
IP는 목적지 서버를 찾는 것이고 서버에서 돌아가는 애플리케이션을 구분하는 것이 포트라고 이해하면 됩니다.(흔히 하는 비유로 IP는 아파트의 동, PORT는 호수라고 합니다.)
TCP/IP 패킷 정보에는 출발지 IP, 출발지 PORT, 목적지 IP, 목적지 PORT, 전송 데이터 등등이 포함됩니다.
PORT는 같은 IP 내에서 프로세스를 구분하는데 사용합니다.

PORT는 0~65535까지 할당 가능하지만 0 ~ 1023까지는 잘 알려진 포트로, 사용하지 않는 것을 추천합니다.
(FTP - 20, 21 / TELNET - 23, HTTP - 80 / HTTPS - 443)

### DNS(Domain Name System)

IP는 숫자에다가 길기 때문에 기억하기 어렵다는 단점을 가지고 있습니다.
또한 IP는 변경될 수 있습니다.
DNS는 전화번호부 같은 서버를 제공해줍니다. 여기서 도메인명을 등록하고 그것을 IP로 바꿀 수 있습니다.
브라우저 주소창에 도매인명을 입력하면 DNS가 도메인에 해당하는 IP를 응답해줍니다.
